@model EatOutByBI.Domain.viewModels.SalesOrderViewModel
@using System.Web.Script.Serialization


@{
    ViewBag.Title = "Ändra Beställning";
}

@{
    string data = new JavaScriptSerializer().Serialize(Model);
}

@section scripts
{

<script src="~/Scripts/knockout-3.4.1.js" type="text/javascript"></script>
    <script src="~/Scripts/knockout.mapping-latest.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script src="~/Scripts/bootstrap-tooltip-extension.js"></script>
    <script src="~/Scripts/salesorderviewmodel.js"></script>

<script src="~/Scripts/BindingBug.js"></script>


    <script type="text/javascript">

        $(document).ajaxStop(function (event, request, settings) {

        var salesOrderViewModel = new SalesOrderViewModel(@Html.Raw(data));


            //var koNode = document.getElementById('myform');
            //ko.cleanNode(koNode);
            //ko.cleanNode($("#myform")[0]);
            ko.applyBindings(salesOrderViewModel, document.getElementById("container"));

        });


    </script>
}

<div class="container">
    @Html.Partial("_EditSalesOrder")
</div>